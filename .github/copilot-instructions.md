# Arduino VSCode æ‰©å±• - AI åŠ©æ‰‹æŒ‡å—

æœ¬é¡¹ç›®ä½¿ç”¨ **Arduino VSCode Extension**ï¼Œæä¾›å®Œæ•´çš„ Arduino å¼€å‘æ”¯æŒã€‚ä»¥ä¸‹æ˜¯ä½ å¯ä»¥åˆ©ç”¨çš„åŠŸèƒ½å’Œèµ„æºã€‚

---

## ğŸ”§ é¡¹ç›®ç»“æ„

æœ¬é¡¹ç›®å¯èƒ½é‡‡ç”¨ä»¥ä¸‹ä¸¤ç§ç»“æ„ä¹‹ä¸€ï¼š

### ä¼ ç»Ÿæ¨¡å¼ (flat)
```
ProjectName/
â”œâ”€â”€ ProjectName.ino       # ä¸»ç¨‹åºæ–‡ä»¶
â”œâ”€â”€ other_code.cpp        # å…¶ä»–æºæ–‡ä»¶ï¼ˆåŒçº§ç›®å½•ï¼‰
â””â”€â”€ .vscode/
    â”œâ”€â”€ serial-data.log   # ä¸²å£æ•°æ®æ—¥å¿—
    â””â”€â”€ build-output.log  # ç¼–è¯‘è¾“å‡ºæ—¥å¿—
```

### åˆ†ç»„æ¨¡å¼ (grouped)
```
ProjectName/
â”œâ”€â”€ src/                  # ğŸ“ æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ProjectName.ino   # ä¸»ç¨‹åºæ–‡ä»¶
â”‚   â”œâ”€â”€ config/           # é…ç½®ç›¸å…³ä»£ç 
â”‚   â”œâ”€â”€ drivers/          # ç¡¬ä»¶é©±åŠ¨ä»£ç 
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ lib/                  # é¡¹ç›®æœ¬åœ°åº“
â”œâ”€â”€ build/                # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ .arduino/             # Arduino é…ç½®
â”‚   â””â”€â”€ project.yaml      # é¡¹ç›®é…ç½®æ–‡ä»¶
â””â”€â”€ .vscode/
    â”œâ”€â”€ serial-data.log   # ä¸²å£æ•°æ®æ—¥å¿—
    â””â”€â”€ build-output.log  # ç¼–è¯‘è¾“å‡ºæ—¥å¿—
```

> **æç¤º**: åˆ†ç»„æ¨¡å¼ä¸‹ï¼Œæºä»£ç å¯ä»¥æ”¾åœ¨ `src/` çš„ä»»æ„å­ç›®å½•ä¸­ï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨æ”¶é›†æ‰€æœ‰ `.ino`ã€`.cpp`ã€`.c`ã€`.h` æ–‡ä»¶ã€‚

---

## ğŸ“¡ ä¸²å£ç›‘è§†å™¨æ•°æ®è®¿é—®

å½“ç”¨æˆ·è¯¢é—®å…³äº **ä¸²å£æ•°æ®ã€ä¸²å£ç›‘è§†å™¨ã€è®¾å¤‡è¾“å‡ºã€è°ƒè¯•ä¿¡æ¯** ç­‰å†…å®¹æ—¶ï¼Œå¯ä»¥è¯»å–ä¸²å£æ—¥å¿—ï¼š

### è®¿é—®æ–¹å¼

```
read_file(".vscode/serial-data.log", 1, 500)
```

### æ•°æ®æ ¼å¼

- `>>>` è¡¨ç¤ºç”¨æˆ·å‘é€ç»™è®¾å¤‡çš„æ•°æ®
- `<<<` è¡¨ç¤ºè®¾å¤‡è¾“å‡ºçš„æ•°æ®
- æ¯è¡ŒåŒ…å«æ—¶é—´æˆ³

### ä½•æ—¶ä½¿ç”¨

- ç”¨æˆ·é—®"å¸®æˆ‘çœ‹çœ‹ä¸²å£è¾“å‡º"
- ç”¨æˆ·é—®"åˆ†æè®¾å¤‡å‘é€çš„æ•°æ®"
- ç”¨æˆ·é—®"ä¸²å£æœ‰ä»€ä¹ˆé”™è¯¯"
- ç”¨æˆ·é—®"æ£€æŸ¥ Arduino çš„è¾“å‡º"
- ç”¨æˆ·éœ€è¦è°ƒè¯•ä¼ æ„Ÿå™¨æ•°æ®
- ç”¨æˆ·æ’æŸ¥é€šä¿¡é—®é¢˜

### æ³¨æ„äº‹é¡¹

- ä¸²å£ç›‘è§†å™¨æ‰“å¼€åï¼Œæ•°æ®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ­¤æ–‡ä»¶
- æ•°æ®æ¯ç§’è‡ªåŠ¨æ›´æ–°åˆ°æ–‡ä»¶
- å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæç¤ºç”¨æˆ·å…ˆæ‰“å¼€ä¸²å£ç›‘è§†å™¨

---

## ğŸ”¨ ç¼–è¯‘è¾“å‡ºæ—¥å¿—è®¿é—®

å½“ç”¨æˆ·è¯¢é—®å…³äº **ç¼–è¯‘é”™è¯¯ã€ç¼–è¯‘å¤±è´¥ã€ä¸Šä¼ å¤±è´¥ã€é”™è¯¯æ’æŸ¥** ç­‰å†…å®¹æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥ç¼–è¯‘æ—¥å¿—ï¼š

### è®¿é—®æ–¹å¼

**ä¼˜å…ˆè¯»å–æœ€åå‡ è¡Œæ¥æŸ¥çœ‹æœ€æ–°çš„é”™è¯¯ä¿¡æ¯ï¼š**
```
read_file(".vscode/build-output.log", -100, -1)  # è¯»å–æœ€å100è¡Œ
```

**æˆ–è¯»å–å®Œæ•´æ—¥å¿—ï¼š**
```
read_file(".vscode/build-output.log", 1, 500)
```

### æ•°æ®æ ¼å¼

- `[æ—¥æœŸ æ—¶é—´] [INFO]` è¡¨ç¤ºæ™®é€šä¿¡æ¯ï¼ˆåŒ…æ‹¬ç¼–è¯‘å™¨å‘½ä»¤ï¼‰
- `[æ—¥æœŸ æ—¶é—´] [WARNING]` è¡¨ç¤ºè­¦å‘Šä¿¡æ¯
- `[æ—¥æœŸ æ—¶é—´] [ERROR]` è¡¨ç¤º**çœŸæ­£çš„ç¼–è¯‘é”™è¯¯**ï¼ˆå¦‚è¯­æ³•é”™è¯¯ã€æœªå®šä¹‰å¼•ç”¨ç­‰ï¼‰
- `[æ—¥æœŸ æ—¶é—´] [SUCCESS]` è¡¨ç¤ºæˆåŠŸä¿¡æ¯

> **æ³¨æ„**: æ—¥å¿—ç³»ç»Ÿä¼šæ™ºèƒ½åŒºåˆ†çœŸæ­£çš„é”™è¯¯å’Œæ™®é€šçš„ç¼–è¯‘å™¨å‘½ä»¤ã€‚ç¼–è¯‘å™¨å‘½ä»¤è¡Œï¼ˆå¦‚ `xtensa-esp32s3-elf-g++`ï¼‰ä¼šè¢«æ ‡è®°ä¸º INFO è€Œé ERRORã€‚

### ä½•æ—¶ä½¿ç”¨

- ç”¨æˆ·é—®"æ£€æŸ¥ç¼–è¯‘é”™è¯¯"æˆ–"å¸®æˆ‘çœ‹çœ‹ç¼–è¯‘å¤±è´¥çš„åŸå› "
- ç”¨æˆ·é—®"ä¸Šä¼ å¤±è´¥äº†æ€ä¹ˆåŠ"
- ç”¨æˆ·é—®"é”™è¯¯æ’æŸ¥"æˆ–"debug"
- ç”¨æˆ·è¯´"ç¼–è¯‘ä¸è¿‡"æˆ–"ç¼–è¯‘æŠ¥é”™"
- ç”¨æˆ·éœ€è¦åˆ†æç¼–è¯‘è­¦å‘Š

### é”™è¯¯æ’æŸ¥æ­¥éª¤

1. **ä¼˜å…ˆè¯»å–æ—¥å¿—æœ€å 50-100 è¡Œ**ï¼ŒæŸ¥æ‰¾ `[ERROR]` æ ‡è®°çš„è¡Œ
2. æ ¹æ®é”™è¯¯ä¿¡æ¯å®šä½é—®é¢˜ï¼š
   - `undefined reference` - å‡½æ•°æœªå®šä¹‰æˆ–åº“æœªå®‰è£…
   - `no matching function` - å‡½æ•°å‚æ•°ç±»å‹ä¸åŒ¹é…
   - `expected ';'` æˆ– `expected '}'` - è¯­æ³•é”™è¯¯
   - `'xxx' was not declared` - å˜é‡/å‡½æ•°æœªå£°æ˜
   - `avrdude: stk500` - ä¸Šä¼ é€šä¿¡å¤±è´¥ï¼Œæ£€æŸ¥ç«¯å£å’Œè¿æ¥
3. ç»“åˆæºä»£ç åˆ†æå…·ä½“é—®é¢˜å¹¶æä¾›ä¿®å¤å»ºè®®

### æ³¨æ„äº‹é¡¹

- æ¯æ¬¡ç¼–è¯‘æˆ–ä¸Šä¼ æ—¶ï¼Œæ—¥å¿—æ–‡ä»¶ä¼šè‡ªåŠ¨é‡ç½®
- æ–‡ä»¶åŒ…å«å®Œæ•´çš„ç¼–è¯‘è¿‡ç¨‹è¾“å‡º
- å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæç¤ºç”¨æˆ·å…ˆæ‰§è¡Œç¼–è¯‘å‘½ä»¤

---

## âš™ï¸ é¡¹ç›®é…ç½®æ–‡ä»¶

é¡¹ç›®é…ç½®å­˜å‚¨åœ¨ `.arduino/project.yaml`ï¼š

```yaml
board:
  fqbn: "arduino:avr:uno"      # ç›®æ ‡æ¿å¡
  port: "COM3"                  # ä¸²å£
  options: {}                   # æ¿å¡é€‰é¡¹
build:
  outputPath: "build"           # ç¼–è¯‘è¾“å‡ºç›®å½•
```

---

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

ä½ å¯ä»¥æç¤ºç”¨æˆ·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆé€šè¿‡å‘½ä»¤é¢æ¿ `Ctrl+Shift+P`ï¼‰ï¼š

### ç¼–è¯‘å’Œä¸Šä¼ 
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `Arduino: Compile` | ç¼–è¯‘å½“å‰é¡¹ç›® |
| `Arduino: Upload` | ç¼–è¯‘å¹¶ä¸Šä¼ åˆ°æ¿å¡ |
| `Arduino: Verify` | ä»…éªŒè¯ä»£ç ï¼ˆä¸ä¸Šä¼ ï¼‰ |

### æ¿å¡å’Œç«¯å£
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `Arduino: Select Board` | é€‰æ‹©ç›®æ ‡æ¿å¡ |
| `Arduino: Select Port` | é€‰æ‹©ä¸²å£ |
| `Arduino: Open Arduino Center` | æ‰“å¼€ç»Ÿä¸€æ§åˆ¶é¢æ¿ |

### ä¸²å£ç›‘è§†å™¨
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `Arduino: Open Serial Monitor` | æ‰“å¼€ä¸²å£ç›‘è§†å™¨ |
| `Arduino: Close Serial Monitor` | å…³é—­ä¸²å£ç›‘è§†å™¨ |
| `Arduino: Send to Serial` | å‘é€æ•°æ®åˆ°ä¸²å£ |

### åº“ç®¡ç†
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `Arduino: Search Library` | æœç´¢åº“ |
| `Arduino: Install Library` | å®‰è£…åº“ |
| `Arduino: Add .ZIP Library...` | ä» ZIP å®‰è£…åº“ |

### å¹³å°ç®¡ç†
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `Arduino: Install Platform` | å®‰è£…æ¿å¡å¹³å° |
| `Arduino: Update Platform` | æ›´æ–°å¹³å° |

---

## ğŸ“š å¸¸ç”¨ Arduino å‡½æ•°å‚è€ƒ

### æ•°å­— I/O
```cpp
pinMode(pin, mode);           // mode: INPUT, OUTPUT, INPUT_PULLUP
digitalWrite(pin, value);     // value: HIGH, LOW
int digitalRead(pin);         // è¿”å› HIGH æˆ– LOW
```

### æ¨¡æ‹Ÿ I/O
```cpp
int analogRead(pin);                    // è¿”å› 0-1023
analogWrite(pin, value);                // PWM è¾“å‡º 0-255
analogReference(type);                  // DEFAULT, INTERNAL, EXTERNAL
```

### æ—¶é—´å‡½æ•°
```cpp
unsigned long millis();       // è¿”å›æ¯«ç§’æ•°
unsigned long micros();       // è¿”å›å¾®ç§’æ•°
delay(ms);                    // å»¶æ—¶æ¯«ç§’
delayMicroseconds(us);        // å»¶æ—¶å¾®ç§’
```

### ä¸²å£é€šä¿¡
```cpp
Serial.begin(baudRate);       // å¸¸ç”¨: 9600, 115200
Serial.print(data);           // æ‰“å°æ•°æ®
Serial.println(data);         // æ‰“å°å¹¶æ¢è¡Œ
Serial.available();           // æ£€æŸ¥å¯è¯»å­—èŠ‚æ•°
Serial.read();                // è¯»å–ä¸€ä¸ªå­—èŠ‚
Serial.write(data);           // å†™å…¥åŸå§‹å­—èŠ‚
```

### ä¸­æ–­
```cpp
attachInterrupt(digitalPinToInterrupt(pin), ISR, mode);
// mode: LOW, CHANGE, RISING, FALLING
detachInterrupt(digitalPinToInterrupt(pin));
```

---

## ğŸ”Œ å¸¸ç”¨ä¼ æ„Ÿå™¨ç¤ºä¾‹

### DHT æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨
```cpp
#include <DHT.h>
#define DHTPIN 2
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);

void setup() {
  dht.begin();
}

void loop() {
  float h = dht.readHumidity();
  float t = dht.readTemperature();
}
```

### è¶…å£°æ³¢æµ‹è· (HC-SR04)
```cpp
#define TRIG_PIN 9
#define ECHO_PIN 10

long duration;
int distance;

void setup() {
  pinMode(TRIG_PIN, OUTPUT);
  pinMode(ECHO_PIN, INPUT);
}

void loop() {
  digitalWrite(TRIG_PIN, LOW);
  delayMicroseconds(2);
  digitalWrite(TRIG_PIN, HIGH);
  delayMicroseconds(10);
  digitalWrite(TRIG_PIN, LOW);
  
  duration = pulseIn(ECHO_PIN, HIGH);
  distance = duration * 0.034 / 2;
}
```

---

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### ç¼–è¯‘é”™è¯¯
1. æ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†æ­£ç¡®çš„æ¿å¡ (`Arduino: Select Board`)
2. æ£€æŸ¥æ˜¯å¦å®‰è£…äº†æ‰€éœ€çš„åº“
3. æ£€æŸ¥è¯­æ³•é”™è¯¯ï¼ˆç¼ºå°‘åˆ†å·ã€æ‹¬å·ä¸åŒ¹é…ç­‰ï¼‰

### ä¸Šä¼ å¤±è´¥
1. æ£€æŸ¥ä¸²å£æ˜¯å¦æ­£ç¡® (`Arduino: Select Port`)
2. æ£€æŸ¥ USB çº¿æ˜¯å¦è¿æ¥
3. æŸäº›æ¿å¡ä¸Šä¼ æ—¶éœ€è¦æŒ‰ RESET æŒ‰é’®
4. å…³é—­ä¸²å£ç›‘è§†å™¨åé‡è¯•

### ä¸²å£æ— è¾“å‡º
1. æ£€æŸ¥ `Serial.begin()` æ³¢ç‰¹ç‡æ˜¯å¦åŒ¹é…
2. ç¡®è®¤ä¸²å£ç›‘è§†å™¨å·²æ‰“å¼€
3. æ£€æŸ¥ `Serial.print()` è°ƒç”¨æ˜¯å¦æ­£ç¡®

---

## ğŸ’¡ ç¼–ç å»ºè®®

1. **é¿å…ä½¿ç”¨ `delay()`** - åœ¨éœ€è¦å“åº”çš„ç¨‹åºä¸­ä½¿ç”¨ `millis()` è¿›è¡Œéé˜»å¡å»¶æ—¶
2. **ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å** - å¦‚ `temperatureC` è€Œé `t`
3. **æ¨¡å—åŒ–ä»£ç ** - å°†åŠŸèƒ½æ‹†åˆ†åˆ° `src/` çš„å­ç›®å½•ä¸­ï¼ˆåˆ†ç»„æ¨¡å¼ï¼‰
4. **æ·»åŠ æ³¨é‡Š** - è§£é‡Šç¡¬ä»¶è¿æ¥å’Œå…³é”®é€»è¾‘
5. **ä½¿ç”¨ `const` å®šä¹‰å¼•è„š** - ä¾¿äºä¿®æ”¹å’Œç†è§£

---

*æ­¤æ–‡ä»¶ç”± Arduino VSCode Extension è‡ªåŠ¨ç”Ÿæˆï¼Œç”¨äºè¾…åŠ© AI ç¼–ç¨‹åŠ©æ‰‹ç†è§£é¡¹ç›®ä¸Šä¸‹æ–‡ã€‚*
